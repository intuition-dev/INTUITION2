// mB v6.06.07 on 2019-06-11T16:59:39.367Z
class FormBind{constructor(){this.form="",this.id=void 0!==sessionStorage.getItem("id")&&JSON.parse(sessionStorage.getItem("id")),this.viewModel=new FormViewModel}init(e){let t=this
this.form="#"+e,null!=this.id&&Promise.all([this.viewModel.read(this.id)]).then(function(){let e=t.viewModel.getViewForm("form1")
$("#form1").find('input[name="col1"]').val(e.col1),$("#form1").find('input[name="col2"]').val(e.col2),$("#form1").find('input[name="id"]').val(e.id)})}add(e){let t=this.viewModel.valid(e)
"OK"==t?this.viewModel.add(e).then(function(){window.location.replace("/screen/tabulator_form")}):Swal.fire({type:"error",title:"Oops...",text:t})}update(e){let t=this.viewModel.valid(e)
"OK"==t?this.viewModel.update(e).then(function(){window.location.replace("/screen/tabulator_form")}):Swal.fire({type:"error",title:"Oops...",text:t})}delete(e){this.viewModel.delete(e).then(function(){window.location.replace("/screen/tabulator_form")})}getFields(){let e={},t=$(this.form+' [name="id"]')
return e.id=t.val(),$(this.form+" input").each(function(t){let i=$(this)
e[i.attr("name")]=i.val()}),e}clearFields(){sessionStorage.removeItem("id"),$(this.form).find("input").val("")}}